<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Painel do Aluno</title>
</head>
<body>
  <h1>Bem-vindo, aluno 游녦</h1>
  <p>Aqui voc칡 vai ver seus hor치rios e avisos.</p>

<script type="module" src="./aluno.js"></script>

<div class="bg-white p-4 rounded shadow mt-4">
  <h2 class="text-lg font-semibold mb-2">Avisos da escola</h2>
  <ul id="listaAvisos" class="list-disc ml-5"></ul>
</div>

<script type="module">
  import { auth, db } from "./firebase.js";
  import {
    onAuthStateChanged
  } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

  import {
    collection,
    getDocs,
    doc,
    getDoc
  } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  // 游댏 Prote칞칚o + perfil
  onAuthStateChanged(auth, async (user) => {
    if (!user) {
      window.location.href = "index.html";
      return;
    }

    const ref = doc(db, "usuarios", user.uid);
    const snap = await getDoc(ref);

    if (!snap.exists() || snap.data().perfil !== "aluno") {
      window.location.href = "index.html";
      return;
    }

    carregarAvisos();
  });

  // 游닉 Buscar avisos
  async function carregarAvisos() {
    const lista = document.getElementById("listaAvisos");
    lista.innerHTML = "";

    const snap = await getDocs(collection(db, "avisos"));
    snap.forEach((doc) => {
      const li = document.createElement("li");
      li.textContent = doc.data().texto;
      lista.appendChild(li);
    });
  }

  <div class="bg-white p-4 rounded shadow mt-6">
  <h2 class="text-lg font-semibold mb-4">Hor치rio de Aulas</h2>

  <div class="flex gap-4 mb-4">
    <select id="turno" class="border p-2 rounded">
      <option value="">Selecione o turno</option>
      <option value="manh칚">Manh칚</option>
      <option value="tarde">Tarde</option>
      <option value="noite">Noite</option>
    </select>

    <select id="turma" class="border p-2 rounded">
      <option value="">Selecione a turma</option>
      <option value="1A">1A</option>
      <option value="2A">2A</option>
      <option value="3A">3A</option>
    </select>
  </div>

  <table class="w-full border">
    <thead>
      <tr class="bg-gray-200">
        <th class="border p-2">Dia</th>
        <th class="border p-2">Hor치rio</th>
        <th class="border p-2">Aula</th>
      </tr>
    </thead>
    <tbody id="tabelaHorario"></tbody>
  </table>
</div>

</script>

</body>
</html>


